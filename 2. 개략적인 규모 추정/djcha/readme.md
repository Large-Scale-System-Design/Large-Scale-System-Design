## 3주차. 개략적인 규모 추정

> 2장. 개략적인 규모 추정  
> 3장. 면접법  
> 내용 정리

<br>

<br>

1. 개략적인 규모 추정

<br>

2. 2의 제곱수
    - 데이터의 양 추정을 위해서, 데이터 볼륨의 단위를 2의 제곱수로 표현하는 것이 기본
    - 최소단위: 1byte(8bits)
    - ASCII 문자 1개 = 1byte

<br>

|     |     |     |
| --- | --- | --- |
| 2^N | 근사치 | 이름  |
| 10  | (일천) 1,000 | 1 KByte |
| 20  | (백만) 1,000,000 | 1 MByte |
| 30  | (십억) 1,000,000,000 | 1 GByte |
| 40  | (일조) 1,000,000,000,000 | 1 TByte<br> |
| 50  | (천조) 1,000,000,000,000,000 | 1 PByte |

<br>

3. 응답 지연 값

|     |     |
| --- | --- |
| 연산명 | 지연 시간 |
| L1 캐시 참조 | 0.5 ns |
| L2 캐시 참조 | 5 ns |
| 뮤텍스(락/언락) | 100 ns |
| 주 메모리 참조 | 100 ns |
| 1Gbps 속도 2KB 전송 | 20 ㎲ |
| 메모리에서 1MB Read | 250 ㎲ |
| 네트워크에서 1MB Read | 10 ms |
| 디스크에서 1MB Read | 30 ms |

<br>

- 메모리는 빠르지만 디스크는 느림
    - 디스크 탐색은 가능한 피해야 함
- 단순 압축 알고리즘은 빠름
- 데이터를 인터넷으로 전송하기 전에 가능하면 압축
- 분산된 데이터 센터간 데이터 전달에는 시간이 소모

<br>

4. SLA
    - 가용성에서 SLA 란 퍼센트 단위의 수치로, 시스템이 UpTime에 있는 비율을 나타냄
        - 99%: 하루 14.4분, 연간 3.65일 장애
        - 99.9%: 하루 1.44분, 연간 8.77시간 장애ㅔ
        - 99.99%: 하루 8.64초, 연간 52.60분 장애
        - **99.999%: 하루 0.864초, 연간 5.26분 장애**
        - 99.9999%: 하루 0.0864초, 연간 31.56초 장애

<br>

5. 예시
    - 월간 능동 사용자: 3억
    - 매일 50%의 사용자가 서비스를 사용
    - 사용자당 하루 평균 2건의 데이터 생성
    - 대용량 데이터가 포함된 데이터는 전체 데이터의 10% 정도
    - 데이터 보관 기간: 5년

- QPS(Query Per Second) 추정치
    - 평균
        - 3억 x 50% = 1.5억
        - 1.5억 x 2건 / (24h x 60m x 60s) = 3억 / 86,400 = 3472.2222
    - 최대
        - 3억 x 2건 / (24h x 60m x 60s) = 6억 / 86,400 = 6944.4444

<br>

- 저장소 추정
    - 데이터 크기
        - ID: 64 Bytes
        - 데이터 내용: 140 Bytes
        - 미디어 포함시: 1 MBytes
    - 하루 데이터 양: 1.5억 x 2건 x 204 Bytes = 57 GBytes

![](Files/image.png)<br>

    - 하루 미디어 양: 1.5억 x 2건 x 10% x 1 MBytes = 29,296.875 GBytes = 28.610229 TBytes

![](Files/image%202.png)<br>

    - 5년 데이터 양: 57 GBytes x 365 x 5 = 101.586914 TBytes

![](Files/image%203.png)<br>

    - 5년 미디어 양: 28.61 TBytes x 365 x 5 = 52,213.667925 TBytes = 51 PBytes

![](Files/image%204.png)<br>

5. 개략적인 규모 추정
    - 근사치로 간소화하여 사용 (9999.7 / 9.9 = 10000 / 10 = 1000)
    - 가정한 내용들도 함께 작성
    - 단위는 필수
    - QPS, 최대 QPS, 저장소 요구량, 캐시 요구량, 서버 수 등을 추정하는 경우가 많음 (면접이야기인가..?)

<br>

<br>

<br>

<br>